<ActionBar title="sriracha" style="background-color: rgb(31, 34, 42); color: white;"></ActionBar>
<TabView #element [(ngModel)]="selectedIndex" (selectedIndexChanged)="tabChange()" selectedTabTextColor="rgb(31, 34, 42)" tabTextColor="white" tabBackgroundColor="rgb(59, 62, 75)">
  <FlexboxLayout *tabItem="{title: 'ðŸ™Š SECRETS'}" flexDirection="column">
    <StackLayout *ngIf="userSecrets.length > 0">
      <Border borderRadius="4" borderWidth="1" borderColor="rgb(59, 62, 75)" style="margin: 20px; margin-top: 20px; margin-bottom: 0px;" *ngFor="let secret of userSecrets">
        <StackLayout style="margin: 10px;">
          <Label text="{{ secret.name }}" textWrap="true" style="font-weight: bold;"></Label>
          <Label text="{{ secret.secret }}" textWrap="true"></Label>
        </StackLayout>
      </Border>
    </StackLayout>
  </FlexboxLayout>
  <FlexboxLayout *tabItem="{title: 'ðŸ¤‘ BUDGET'}" flexDirection="column" class="tab-budget">
    <StackLayout *ngIf="!activeBudget">
      <Label text="Amount" class="title"></Label>
      <Label text="The maximum amount you plan to spend" class="legend"></Label>
      <FlexboxLayout flexDirection="row" class="amount-flex">
        <Label text="Â£" class="big-mono"></Label>
        <TextView class="big-mono input" keyboardType="phone" [(ngModel)]="amount"></TextView>
        <Label text=".00" class="big-mono"></Label>
      </FlexboxLayout>
    </StackLayout>

    <StackLayout *ngIf="!activeBudget">
      <Label text="End" class="title"></Label>
      <Label text="The hour when the limit should be raised" class="legend"></Label>
      <TimePicker hour="6" minute="0" minuteInterval="15" [(ngModel)]="end"></TimePicker>
    </StackLayout>

    <Button *ngIf="!activeBudget" text="Limit me" class="confirm-btn" (tap)="addBudget()"></Button>

    <Label *ngIf="activeBudget" text="Budget active" class="budget-active-warning"></Label>
    <StackLayout *ngIf="activeBudget">
      <Label text="Amount left" class="legend"></Label>
      <Label text="Â£ {{ activeBudget.amount }}.00" class="big-mono text-center"></Label>
    </StackLayout>

    <StackLayout *ngIf="activeBudget" style="margin-bottom: 40px;">
      <Label text="Time remaining" class="legend"></Label>
      <Label text="{{ activeBudget.remaining }}" class="big-mono text-center"></Label>
    </StackLayout>

    <Button *ngIf="cancelable" text="Cancel {{ timeCancel }}" class="btn" (tap)="cancelBudget()"></Button>
  </FlexboxLayout>
</TabView>
